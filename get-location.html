<!DOCTYPE html>
<html lang="zh-Hant-TW">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7"
      crossorigin="anonymous"
    />
    <title>位置範例</title>
  </head>
  <body class="p-4">
    <div class="container">
      <h1 class="mb-4">取得使用者位置</h1>
      <button id="getLocationBtn" class="btn btn-primary mb-3">取得位置</button>
      <div id="locationDisplay" class="alert alert-info d-none"></div>
      <div id="errorDisplay" class="alert alert-danger d-none"></div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
      crossorigin="anonymous"
    ></script>
    <script>
      const getLocationBtn = document.getElementById('getLocationBtn')
      const locationDisplay = document.getElementById('locationDisplay')
      const errorDisplay = document.getElementById('errorDisplay')

      getLocationBtn.addEventListener('click', () => {
        if (!navigator.geolocation) {
          errorDisplay.classList.remove('d-none')
          errorDisplay.textContent = '你的瀏覽器不支援定位功能。'
          return
        }

        navigator.geolocation.getCurrentPosition(
          (position) => {
            const { latitude, longitude } = position.coords
            locationDisplay.classList.remove('d-none')
            locationDisplay.textContent = `你的位置是：緯度 ${latitude.toFixed(
              6,
            )}，經度 ${longitude.toFixed(6)}`
            errorDisplay.classList.add('d-none')
          },
          (error) => {
            errorDisplay.classList.remove('d-none')
            locationDisplay.classList.add('d-none')
            switch (error.code) {
              case error.PERMISSION_DENIED:
                errorDisplay.textContent = '使用者拒絕提供位置資訊。'
                break
              case error.POSITION_UNAVAILABLE:
                errorDisplay.textContent = '無法取得位置資訊。'
                break
              case error.TIMEOUT:
                errorDisplay.textContent = '取得位置逾時。'
                break
              default:
                errorDisplay.textContent = '發生未知錯誤。'
            }
          },
        )
      })
    </script>
  </body>
</html>
